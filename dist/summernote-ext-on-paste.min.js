!function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof module&&module.exports?module.exports=factory(require("jquery")):factory(window.jQuery)}((function($){$.extend(!0,$.summernote.lang,{"en-US":{onPaste:{success:"Pasted text has been processed&#33;",allElementsRemoved:"Pasted text contains only disallowed elements! Nothing pasted.",unknownError:"Unexpected error. Error message logged to the console."}},"es-ES":{onPaste:{success:"&#161;El texto pegado ha sido procesado!",allElementsRemoved:"&#161;El texto pegado contiene solo elementos no permitidos&#33; Nada pegado.",unknownError:"Error inesperado. Mensaje de error registrado en la consola."}},"fr-FR":{onPaste:{success:"Le texte colle&#769; a e&#769;te&#769; traite&#769;&#33;",allElementsRemoved:"Le texte colle&#769; ne contient que des e&#769;le&#769;ments interdits&#33; Rien colle&#769;.",unknownError:"Erreur inattendue. Message d&#39;erreur connecte&#769; a&#768; la console."}}}),$.extend($.summernote.options,{onPaste:{allowedTags:["h1","h2","h3","h4","h5","h6","blockquote","ol","ul","li","p","div","span","table","thead","tbody","tfoot","tr","th","td","b","strong","em","i","u","a","img"],allowChildren:["aside"],requiresAttributes:["img","a"],allowedAttributes:{img:["src","alt","height","width"],a:["href","target","name"],table:["class"],th:["colspan","rowspan"],td:["colspan","rowspan"],span:["class"]}}}),$.extend($.summernote.plugins,{onPaste:function(context){$.summernote.ui;var $note=context.layoutInfo.note,$editor=context.layoutInfo.editor,lang=context.options.langInfo,onPasteOptions=$.extend({},!0,$.summernote.options.onPaste,context.options.onPaste),emptyText=new RegExp(/^\n$/),processNode=function(node){var parentNode=node.parentNode;switch(node.nodeType){case 1:var nodeName=node.nodeName.toLowerCase();if(-1===onPasteOptions.allowedTags.indexOf(nodeName))return-1!==onPasteOptions.allowChildren.indexOf(nodeName)&&node.childNodes.forEach(childNode=>{parentNode.insertBefore(childNode,node)}),void parentNode.removeChild(node);if(onPasteOptions.requiresAttributes.indexOf(nodeName)>-1&&0===node.attributes.length)return void parentNode.removeChild(node);if("span"===nodeName&&0===node.attributes.length)return void parentNode.replaceChild(node.firstChild,node);var allowedAttributes=onPasteOptions.allowedAttributes[nodeName]||[];Array.from(node.attributes).forEach(attribute=>{-1===allowedAttributes.indexOf(attribute.name.toLowerCase())&&node.removeAttribute(attribute.name)}),node.childNodes.forEach(childNode=>{processNode(childNode)});break;case 3:if("body"===parentNode.nodeName.toLowerCase()){if(node.nodeValue.match(emptyText))return void parentNode.removeChild(node);var paragraphs=node.nodeValue.split(/\s{2,}/gm),trailingWhiteSpace=new RegExp(/[ \t]+$/g);paragraphs.reverse().forEach(element=>{var newPara=document.createElement("p"),content=document.createTextNode(element.replace(trailingWhiteSpace,""));newPara.appendChild(content),parentNode.appendChild(newPara)}),parentNode.removeChild(node)}break;case 2:case 8:default:return void parentNode.removeChild(node)}};this.events={"summernote.paste":function(we,e){e.preventDefault();var htmlText,bodyNode,text=e.originalEvent.clipboardData.getData("text");try{var processedNode=(htmlText=text,bodyNode=(new DOMParser).parseFromString(htmlText,"text/html").getElementsByTagName("BODY")[0],Array.from(bodyNode.childNodes).forEach(childNode=>{3===childNode.nodeType&&childNode.nodeValue.match(emptyText)?bodyNode.removeChild(childNode):processNode(childNode)}),bodyNode)}catch(error){$(".note-status-output").html('<div class="alert alert-danger">'+lang.onPaste.unknownError+"</div>"),console.log("summernote-ext-on-paste - unexpected error: "+error)}processedNode&&processedNode.hasChildNodes()?(Array.from(processedNode.childNodes).forEach(childNode=>{setTimeout((function(){$note.summernote("insertNode",childNode)}),1)}),$(".note-status-output").html('<div class="alert alert-success">'+lang.onPaste.success+"</div>")):$(".note-status-output").html('<div class="alert alert-warning">'+lang.onPaste.allElementsRemoved+"</div>"),setTimeout(()=>{$editor.find(".summernote-cleanerAlert").remove()},5)}}}})}));